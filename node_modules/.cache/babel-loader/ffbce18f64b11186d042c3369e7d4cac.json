{"ast":null,"code":"import _objectSpread from\"/home/dinesh/Desktop/Account/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/dinesh/Desktop/Account/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Formik,Form,Field,ErrorMessage}from'formik';import*as yup from'yup';import Axios from'axios';function ExitsDebit(){var initial={mainselect:\"\",subselect:\"\"};var _useState=useState(initial),_useState2=_slicedToArray(_useState,2),reason=_useState2[0],setReason=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mainselect=_useState4[0],setmainSelect=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),subselect=_useState6[0],setsubSelect=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),amount=_useState8[0],setAmount=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setformData=_useState10[1];//const offline = \"http://localhost:2000\"\nvar online=\"https://accountnote.herokuapp.com\";useEffect(function(){Axios.get(online+\"/credit\").then(function(res){setmainSelect(res.data);}).catch(function(err){console.log(err);});},[]);useEffect(function(){Axios.get(online+\"/debit/reason\",{params:{reason:reason.mainselect}}).then(function(res){console.log(res.date);setsubSelect(res.data);}).catch(function(err){console.log(err);});},[reason.mainselect]);useEffect(function(){Axios.get(online+\"/debit/amount\",{params:{reason:reason.subselect}}).then(function(res){console.log(\"amount\",res.date);setAmount(res.data.availableAmount);}).catch(function(err){console.log(err);});},[reason.subselect]);useEffect(function(){if(formData){Axios.post(online+\"/debit/exits\",formData).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});setTimeout(getExits,100);}},[formData]);var getExits=function getExits(){Axios.get(online+\"/debit/exits\").then(function(res){console.log(\"exits\",res.data);}).catch(function(err){console.log(err);});};var initialValue={credit:\"\",debit:\"\",reason:\"\",amount:\"\"};var submit=function submit(values,props){console.log(values);setformData(values);props.resetForm();window.location.reload();};var validationSchema=yup.object({credit:yup.string().required(\"Plese Select Reason\"),debit:yup.string().required(\"Plese Select Reason\"),reason:yup.string().required(\"Reason Required\"),amount:yup.string().required(\"Amount Required\")});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Formik,{initialValues:initialValue,onSubmit:submit,validationSchema:validationSchema},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"credit\",className:\"form-control mt-2\",onClick:function onClick(e){return setReason(_objectSpread(_objectSpread({},reason),{},{mainselect:e.target.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Credit\"),mainselect.map(function(option,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:option.reason},option.reason);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"credit\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"debit\",className:\"form-control mt-2\",onClick:function onClick(e){return setReason(_objectSpread(_objectSpread({},reason),{},{subselect:e.target.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Debit\"),subselect.map(function(option,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:option.reason},option.reason);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"debit\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"form-control mt-2\"},\"Available Amount : \",amount)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{type:\"text\",name:\"reason\",className:\"form-control mt-2\",placeholder:\"Enter Reason for Debit\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"reason\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{type:\"number\",name:\"amount\",className:\"form-control mt-2\",placeholder:\"Enter amount to Debit\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"amount\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w3-center\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn w3-red mt-2\"},\"Debit\")))));}export default ExitsDebit;","map":{"version":3,"sources":["/home/dinesh/Desktop/Account/src/component/ExitsDebit.js"],"names":["React","useState","useEffect","Formik","Form","Field","ErrorMessage","yup","Axios","ExitsDebit","initial","mainselect","subselect","reason","setReason","setmainSelect","setsubSelect","amount","setAmount","formData","setformData","online","get","then","res","data","catch","err","console","log","params","date","availableAmount","post","setTimeout","getExits","initialValue","credit","debit","submit","values","props","resetForm","window","location","reload","validationSchema","object","string","required","e","target","value","map","option","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as yup from 'yup';\nimport Axios from 'axios';\n\nfunction ExitsDebit() {\n\n    const initial = {\n        mainselect: \"\",\n        subselect: \"\"\n    }\n    const [reason, setReason] = useState(initial)\n    const [mainselect, setmainSelect] = useState([])\n    const [subselect, setsubSelect] = useState([])\n    const [amount, setAmount] = useState()\n    const [formData, setformData] = useState()\n\n    //const offline = \"http://localhost:2000\"\n    const online = \"https://accountnote.herokuapp.com\"\n\n\n\n    useEffect(() => {\n        Axios.get(online+\"/credit\")\n            .then(res => {\n                setmainSelect(res.data)\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }, [])\n\n    useEffect(() => {\n        Axios.get(online+\"/debit/reason\", { params: { reason: reason.mainselect } })\n            .then(res => {\n                console.log(res.date)\n                setsubSelect(res.data)\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }, [reason.mainselect])\n\n    useEffect(() => {\n        Axios.get(online+\"/debit/amount\", { params: { reason: reason.subselect } })\n            .then(res => {\n                console.log(\"amount\", res.date)\n                setAmount(res.data.availableAmount)\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }, [reason.subselect])\n\n    useEffect(() => {\n        if (formData) {\n            Axios.post(online+\"/debit/exits\", formData)\n                .then(res => {\n                    console.log(res.data)                    \n                })\n                .catch(err => {\n                    console.log(err)\n                })\n            \n            setTimeout(getExits,100)    \n        }\n    }, [formData])\n\n    const getExits = () =>{\n        Axios.get(online+\"/debit/exits\")\n        .then(res=>{\n            console.log(\"exits\",res.data)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    const initialValue = {\n        credit: \"\",\n        debit: \"\",        \n        reason: \"\",\n        amount: \"\"\n    }\n    const submit = (values,props) => {\n        console.log(values)\n        setformData(values)\n        props.resetForm()\n        window.location.reload()\n\n    }\n    const validationSchema = yup.object({\n        credit: yup.string().required(\"Plese Select Reason\"),\n        debit: yup.string().required(\"Plese Select Reason\"),\n        reason: yup.string().required(\"Reason Required\"),\n        amount: yup.string().required(\"Amount Required\")\n    })\n\n    return (\n        <div>\n            <Formik\n                initialValues={initialValue}\n                onSubmit={submit}\n                validationSchema={validationSchema}\n            >\n                <Form>\n                    <div>\n                        <Field\n                            as=\"select\"\n                            name=\"credit\"\n                            className=\"form-control mt-2\"                            \n                            onClick={(e) => setReason({ ...reason, mainselect: e.target.value })}\n                        >\n                            <option value=\"\">Select Credit</option>\n                            {\n                                mainselect.map((option, index) => (\n                                    <option key={index} value={option.reason} >{option.reason}</option>\n                                ))\n                            }\n                        </Field>\n                        <ErrorMessage name=\"credit\" />\n                    </div>\n\n                    <div>\n                        <Field\n                            as=\"select\"\n                            name=\"debit\"\n                            className=\"form-control mt-2\"                            \n                            onClick={(e) => setReason({ ...reason, subselect: e.target.value })}\n                        >\n                            <option value=\"\">Select Debit</option>\n                            {\n                                subselect.map((option, index) => (\n                                    <option key={index} value={option.reason} >{option.reason}</option>\n                                ))\n                            }\n                        </Field>\n                        <ErrorMessage name=\"debit\" />\n                    </div>\n\n                    <div>\n                        <label className=\"form-control mt-2\">Available Amount : {amount}</label>\n                    </div>\n\n                    <div>\n                        <Field\n                            type=\"text\"\n                            name=\"reason\"\n                            className=\"form-control mt-2\"\n                            placeholder=\"Enter Reason for Debit\"\n                        />\n                        <ErrorMessage name=\"reason\" />\n                    </div>\n\n                    <div>\n                        <Field\n                            type=\"number\"\n                            name=\"amount\"\n                            className=\"form-control mt-2\"\n                            placeholder=\"Enter amount to Debit\"\n                        />\n                        <ErrorMessage name=\"amount\" />\n                    </div>\n                    <div className=\"w3-center\">\n                        <button type=\"submit\" className=\"btn w3-red mt-2\">Debit</button>\n                    </div>\n                </Form>\n\n            </Formik>\n        </div>\n    )\n}\n\nexport default ExitsDebit\n"]},"metadata":{},"sourceType":"module"}